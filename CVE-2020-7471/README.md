# CVE-2020-7471
本文件夹内项目提供了`CVE-2020-7471 Potential SQL injection via StringAgg(delimiter)`漏洞的环境和`EXP`.

## 受影响的 Django 版本
 - 1.11 <= version < 1.11.28 
 - 2.2 <= version < 2.2.10 
 - 3.0 <= version < 3.0.3

## 使用说明
1. 安装含有`CVE-2020-7471`漏洞的`Django`版本, 测试用的是`3.0.2`.

```shell
python -m pip install django==3.0.2 -i https://pypi.tuna.tsinghua.edu.cn/simple
```

2. 完成`postgres`数据库的安装, 参考文章: [Windows 上安装 PostgreSQL](https://www.runoob.com/postgresql/windows-install-postgresql.html).

3. 创建数据库`vuln`.

```shell
CREATE DATABASE vuln;
```

4. 修改`vuln_env/settings.py`中的数据库配置, 将数据库、用户名、密码、端口等都修改为自己的.

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'vuln',         # 数据库名称
        'USER': 'postgres',     # 数据库用户
        'PASSWORD': 'postgres', # 数据库用户密码
        'HOST': '127.0.0.1',    # 数据库地址
        'PORT': '5432',         # 数据库端口
    }
}
```

5. 通过`Django`初始化`postgres`数据表.

```shell
python manage.py migrate
python manage.py makemigrations vuln_app
python manage.py migrate vuln_app
```

6. 运行`exp.py`文件来复现漏洞.

## 参考
 - [CVE-2020-7471](https://github.com/Saferman/CVE-2020-7471)